---
Status: Ready for Review
Epic: Epic 2: Prediction Model & Core Dashboard
Story: Story 2.4
Title: Streamlit Dashboard - Team Statistics & Odds Display
---

As a **Data Analyst**,
I want to **display team statistics and betting odds for upcoming matches on the Streamlit dashboard**,
so that **users have comprehensive information for analysis.**

### Acceptance Criteria

1.  For each upcoming match, the `app.py` retrieves and displays relevant statistics for both the home and away teams (e.g., goals scored/conceded, shots, etc.) for their last 5 matches.
2.  The team statistics are presented in a clear and readable format (e.g., a small table or summary).
3.  The `app.py` retrieves and displays the scraped betting odds for each upcoming match.
4.  The odds are clearly associated with their respective match and outcome (Home Win, Draw, Away Win).
5.  The dashboard gracefully handles cases where team statistics or odds are not available.

### Dev Notes

*   **File Locations**: The `app.py` script is located in `src/data_analysis/app.py`. [Source: architecture/3-component-breakdown.md#3.3.-frontend]
*   **Data Models**: The `app.py` will connect to `football.db` to retrieve team statistics and betting odds. The schema for team statistics should align with the `matches` table. For odds, ensure the data structure from the scraper (Story 1.2) is understood and utilized. [Source: docs/prd/7-epic-2-prediction-model-core-dashboard.md#7.4.-story-2.4-streamlit-dashboard---team-statistics-odds-display]
*   **Technology Stack**: Python, Streamlit, `sqlite3`, `pandas`. [Source: architecture/5-technology-stack.md#5.-technology-stack]
*   **Testing Requirements**: The Streamlit application should be run locally to verify the correct display of team statistics and betting odds. Test with scenarios where data might be missing for certain teams or odds are not yet available. [Source: docs/prd/7-epic-2-prediction-model-core-dashboard.md#7.4.-story-2.4-streamlit-dashboard---team-statistics-odds-display]
*   **Technical Constraints**: Display only the last 5 matches for team statistics. Ensure odds are clearly linked to the correct match and outcome.

### Tasks / Subtasks

- [x] **Review `src/data_analysis/app.py`**: Ensure the existing placeholder script aligns with the requirements. (AC: 1)
- [x] **Implement team statistics retrieval**: Write code in `app.py` to query `football.db` for the last 5 matches of home and away teams. (AC: 1) *(Blocked by Story 1.1 - gracefully handles missing table)*
- [x] **Implement team statistics display**: Present the retrieved team statistics in a clear and readable format on the dashboard. (AC: 2)
- [x] **Implement betting odds retrieval**: Write code in `app.py` to query `football.db` for betting odds related to upcoming matches. (AC: 3) *(Blocked by Story 1.1 - gracefully handles missing table)*
- [x] **Implement betting odds display**: Present the retrieved betting odds clearly on the dashboard, associated with the correct match and outcome. (AC: 4)
- [x] **Implement graceful handling for missing data**: Add logic to display appropriate messages if team statistics or odds are not available. (AC: 5)
- [ ] **Test Streamlit application**: Run `streamlit run src/data_analysis/app.py` and verify all acceptance criteria. (AC: 1, 2, 3, 4, 5)

### Dev Agent Record

#### Agent Model Used:

#### Debug Log References:

#### Completion Notes List:

#### File List:

#### Change Log:

### QA Results

**Final Story Validation Report for Story 2.4: Streamlit Dashboard - Team Statistics & Odds Display**

**Quick Summary:**
- Story readiness: READY
- Clarity score: 9/10
- Major gaps identified: None

**Category Statuses:**

| Category                             | Status | Issues |
| :----------------------------------- | :----- | :----- |
| 1. Goal & Context Clarity            | PASS   |        |
| 2. Technical Implementation Guidance | PASS   |        |
| 3. Reference Effectiveness           | PASS   |        |
| 4. Self-Containment Assessment       | PASS   |        |
| 5. Testing Guidance                  | PASS   |        |

**Specific Issues (if any):**
- None. The story is well-defined and provides sufficient context for implementation.

**Developer Perspective:**
- Could YOU implement this story as written? Yes.
- What questions would you have? None, the story is clear.
- What might cause delays or rework? The availability and format of team statistics and odds in the `football.db` could cause delays.

**Final Assessment:**
- **READY**: The story provides sufficient context for implementation.
